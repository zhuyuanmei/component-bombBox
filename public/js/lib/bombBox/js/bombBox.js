define(function(t){var e=t("mustache"),i=$(window),s=1,n=!1,o={contentTpl:['<div class="rDialog-wrap">',"{{#hasCloseBtn}}",'<a href="javascript:;" class="rDialog-close" title="关闭"></a>',"{{/hasCloseBtn}}","{{#hasTitle}}",'<div class="rDialog-header">{{title}}</div>',"{{/hasTitle}}",'<div class="rDialog-content">{{&content}}</div>',"{{#hasFoot}}",'<div class="rDialog-footer"></div>',"{{/hasFoot}}","</div>"]},a=function(t){this.settings=$.extend({},a.defaults,t),this.init()};a.prototype={init:function(){this.create()},create:function(){var t=this,i=""===t.settings.title?!1:!0,n={hasCloseBtn:t.settings.hasCloseBtnFlag,hasTitle:i,title:t.settings.title,content:t.settings.content,hasFoot:t.settings.hasFootFlag},a=e.render(o.contentTpl.join(""),n);t.preview=$(a),t.preview.prependTo("body"),t.mask=$("<div>").css({zIndex:t.settings.zIndex}).addClass("rDialog-mask"),t.mask.appendTo("body"),t.preview.css("z-index",t.settings.zIndex+s++),t.settings.hasFootFlag&&$.isFunction(t.settings.ok)&&t.ok(),t.settings.hasFootFlag&&$.isFunction(t.settings.cancel)&&parseInt(t.settings.footBtnNumber)>1&&t.cancel(),t.size(),t.position(),t.bindEvent()},ok:function(){var t=this,e=t.preview.find(".rDialog-footer")[0],i=$('<a href="javascript:;">'+t.settings.okText+"</a>");i.prependTo(e),parseInt(t.settings.footBtnNumber)<2&&i.css("width","100%"),i.on("click",function(){t.settings.okCallBack?t.settings.ok():t.close()})},cancel:function(){var t=this,e=t.preview.find(".rDialog-footer")[0],i=$('<a href="javascript:;" class="rDialog-cancel">'+t.settings.cancelText+"</a>");i.prependTo(e),i.on("click",function(){t.settings.cancelCallBack?t.settings.cancel():t.close()})},size:function(){var t=this,e=t.preview.find(".rDialog-content"),s=t.preview;if(parseInt(t.settings.width)>=i.width()){var n=i.width()>720?"60%":"90%";s.css({width:n})}else{var n=0;parseInt(t.settings.width)+2*parseInt(e.css("padding-left"))>=i.width()||"auto"===t.settings.width?(n=i.width()>720?"60%":"90%",s.css({width:n})):(e.css({width:parseInt(t.settings.width)}),s.css("width",e.width()+2*parseInt(e.css("padding-left"))))}},position:function(){var t=this;t.preview.css({left:"50%",top:"50%","-webkit-transform":"translate3d(-50%,-50%,0)"})},lock:function(){n||(n=!0)},unLock:function(){var t=this;t.settings.lock&&n&&(t.mask.remove(),n=!1)},close:function(){var t=this;t.preview.remove(),t.mask.remove()},time:function(){var t=this;t.closeTimer=setTimeout(function(){t.close()},1e3*parseInt(t.settings.time))},bindEvent:function(){var t=this,e=t.preview.find(".rDialog-close");t.settings.time&&t.time(),e.on("click",function(){t.close()}),i.on("resize",function(){t.position()})}},a.defaults={content:"请稍等...",hasCloseBtnFlag:!0,title:"提示",width:"auto",hasFootFlag:!0,footBtnNumber:2,okText:"确定",okCallBack:!1,ok:function(){},cancelText:"取消",cancelCallBack:!1,cancel:function(){},time:null,lock:!1,zIndex:9};var c=function(t){new a(t)};window.rBombBox=$.rBombBox=$.bombBox=c});